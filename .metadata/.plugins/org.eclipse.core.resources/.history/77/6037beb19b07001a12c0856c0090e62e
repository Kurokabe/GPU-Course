
#include "Bandwidth.h"

#include <iostream>
#include <assert.h>

#include "Device.h"
#include "Chrono.h"


 /*---------------------------------------------------------------------*\
 |*			Declaration 					*|
 \*---------------------------------------------------------------------*/

/*--------------------------------------*\
 |*		Imported	 	*|
 \*-------------------------------------*/

extern __global__ void kernelHistogramme(int* tabDataGM, int* tabFrequenceGM, int n, int dataMax);

 /*----------------------------------------------------------------------*\
 |*			Implementation 					*|
 \*---------------------------------------------------------------------*/

 /*-------------------------------------*\
 |*		Constructeur		*|
 \*-------------------------------------*/

Histogramme::Histogramme(const Grid& grid, int* tabData, int n) : n(n)
    {

    this->dg = grid.dg;
    this->db = grid.db;

    this->sizeTabDataGM = sizeof(int); // [octet]

    Device::malloc(&tabDataGM, sizeTabDataGM);

    Chrono chrono;
    //Device::memcpyHToD(tabDataGM, tabData, sizeTabDataGM);
    chrono.stop();
    cout << "Elapsed time : " << chrono.getDeltaTime() << " (s)" << endl;
    }

Histogramme::~Histogramme(void)
    {
    Device::free (tabDataGM);
    }

 /*-------------------------------------*\
 |*		Methode			*|
 \*-------------------------------------*/

void Histogramme::run()
    {
    //kernelHistogramme<<<dg,db>>>(tabDataGM);
    //Device::memcpyDToH(tabData, tabDataGM);
    }

 /*---------------------------------------------------------------------*\
 |*			End	 					*|
 \*---------------------------------------------------------------------*/
